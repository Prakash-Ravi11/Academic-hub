<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowState Pro - Ultimate AI Productivity Companion</title>
    <meta name="description" content="Ultimate AI productivity companion with voice AI, task management, and study tracking">
    <meta name="theme-color" content="#3b82f6">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <style>
        :root {
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: rgba(255, 255, 255, 0.95);
            --bg-tertiary: rgba(248, 250, 252, 0.9);
            --text-primary: #1a202c;
            --text-secondary: #64748b;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-primary: 0 20px 40px rgba(0, 0, 0, 0.1);
            --shadow-secondary: 0 8px 20px rgba(0, 0, 0, 0.06);
            --primary-color: #667eea;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --card-bg: rgba(255, 255, 255, 0.9);
            --accent-gradient: linear-gradient(135deg, #667eea, #764ba2);
        }

        [data-theme="dark"] {
            --bg-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --bg-secondary: rgba(26, 26, 46, 0.95);
            --bg-tertiary: rgba(22, 33, 62, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --border-color: rgba(255, 255, 255, 0.1);
            --card-bg: rgba(26, 26, 46, 0.9);
            --accent-gradient: linear-gradient(135deg, #667eea, #764ba2);
        }

        [data-theme="elegant"] {
            --bg-primary: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            --bg-secondary: rgba(255, 236, 210, 0.95);
            --bg-tertiary: rgba(252, 182, 159, 0.9);
            --text-primary: #8b4513;
            --text-secondary: #d2691e;
            --card-bg: rgba(255, 236, 210, 0.9);
            --accent-gradient: linear-gradient(135deg, #ff9a9e, #fecfef);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .auth-modal.hidden {
            display: none;
        }

        .auth-content {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow-primary);
            max-width: 400px;
            width: 90%;
            text-align: center;
            backdrop-filter: blur(20px);
        }

        .auth-logo {
            width: 80px;
            height: 80px;
            background: var(--accent-gradient);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 36px;
            font-weight: bold;
            margin: 0 auto 30px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .auth-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 16px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .auth-input::placeholder {
            color: var(--text-secondary);
        }

        .auth-btn {
            padding: 16px 24px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .auth-btn:active {
            transform: translateY(0);
        }

        .auth-switch {
            margin-top: 20px;
            color: var(--text-secondary);
        }

        .auth-link {
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
        }

        .auth-link:hover {
            text-decoration: underline;
        }

        .error-message, .success-message {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-weight: 500;
            display: none;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        /* Main App */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: var(--bg-secondary);
            min-height: 100vh;
            backdrop-filter: blur(20px);
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 2px solid var(--border-color);
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .app-logo {
            width: 50px;
            height: 50px;
            background: var(--accent-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .app-name {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
        }

        .app-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin-left: 4px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theme-selector {
            display: flex;
            gap: 8px;
            background: var(--bg-tertiary);
            padding: 8px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .theme-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .theme-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: var(--accent-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Main Content Layout */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
        }

        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-secondary);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-primary);
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .card-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        /* Voice Controls */
        .voice-controls {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .voice-btn {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            background: var(--accent-gradient);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .voice-btn:hover {
            transform: scale(1.1);
        }

        .voice-btn.listening {
            background: var(--danger-color);
            animation: pulse 2s infinite;
        }

        .voice-status {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Quote Display */
        .quote-display {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--primary-color);
            position: relative;
            margin-bottom: 20px;
        }

        .quote-text {
            font-style: italic;
            font-size: 16px;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .quote-author {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
        }

        .quote-category {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* AI Chat */
        .chat-container {
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-bottom: 16px;
            border: 1px solid var(--border-color);
        }

        .message {
            margin-bottom: 16px;
            padding: 12px 16px;
            border-radius: 16px;
            max-width: 80%;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease;
        }

        .message.user {
            background: var(--accent-gradient);
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .message.ai {
            background: var(--card-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            margin-right: auto;
        }

        .chat-input-container {
            display: flex;
            gap: 12px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .send-btn {
            padding: 12px 20px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
        }

        .send-btn:hover {
            transform: translateY(-2px);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .quick-action {
            padding: 6px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .quick-action:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Task Management */
        .task-input-container {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .task-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .add-task-btn {
            padding: 12px 20px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .task-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-secondary);
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }

        .task-checkbox.checked {
            background: var(--primary-color);
        }

        .task-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-size: 12px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .task-text {
            flex: 1;
            color: var(--text-primary);
        }

        .task-text.completed {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .task-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .delete-task-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
        }

        /* Progress Display */
        .progress-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 0 auto 16px;
            position: relative;
        }

        .progress-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
        }

        .progress-ring .background {
            stroke: var(--border-color);
        }

        .progress-ring .progress {
            stroke: var(--primary-color);
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 0.5s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .progress-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        /* Study Statistics */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* ChatGPT Section */
        .chatgpt-container {
            margin-bottom: 20px;
        }

        .chatgpt-input {
            width: 100%;
            min-height: 100px;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            resize: vertical;
            margin-bottom: 12px;
        }

        .chatgpt-response {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
            border: 1px solid var(--border-color);
            display: none;
        }

        .chatgpt-response.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Learning Hub */
        .learning-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .learning-btn {
            padding: 16px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
        }

        .learning-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                padding: 16px;
            }
            
            .app-header {
                flex-direction: column;
                gap: 16px;
            }
            
            .header-controls {
                flex-direction: column;
                gap: 12px;
            }
            
            .auth-content {
                padding: 24px;
            }
            
            .main-content {
                gap: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .learning-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .show { display: block !important; }
        .btn { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary { background: var(--accent-gradient); color: white; }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border-color); }
        .btn:hover { transform: translateY(-2px); }
    </style>
</head>
<body data-theme="light">
    <!-- Authentication Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <div class="auth-logo">FS</div>
            <div class="auth-title" id="authTitle">Welcome to FlowState Pro</div>
            <div class="auth-subtitle" id="authSubtitle">Enter your credentials to continue</div>
            
            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" class="auth-input" id="nameInput" placeholder="Your Name" required>
                <input type="password" class="auth-input" id="passwordInput" placeholder="Create Password" required>
                <button type="submit" class="auth-btn" id="authSubmitBtn">Create Account</button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container hidden" id="mainApp">
        <!-- App Header -->
        <div class="app-header">
            <div class="app-title">
                <div class="app-logo">FS</div>
                <div>
                    <div class="app-name">FlowState Pro</div>
                    <div class="app-subtitle">Ultimate AI Productivity Companion</div>
                </div>
            </div>
            <div class="header-controls">
                <div class="theme-selector">
                    <button class="theme-btn active" onclick="setTheme('light')">Light</button>
                    <button class="theme-btn" onclick="setTheme('dark')">Dark</button>
                    <button class="theme-btn" onclick="setTheme('elegant')">Elegant</button>
                </div>
                <div class="user-profile" onclick="logout()">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-name" id="userName">User</div>
                </div>
            </div>
        </div>

        <!-- Voice Controls -->
        <div class="card">
            <div class="card-title">üé§ Voice AI Assistant</div>
            <div class="card-subtitle">Use voice commands to control your productivity</div>
            <div class="voice-controls">
                <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceRecognition()">üé§</button>
                <div class="voice-status" id="voiceStatus">Click to start voice recognition</div>
            </div>
        </div>

        <!-- Motivational Quote -->
        <div class="quote-display" id="quoteDisplay">
            <div class="quote-category" id="quoteCategory">Motivation</div>
            <div class="quote-text" id="quoteText">"The way to get started is to quit talking and begin doing."</div>
            <div class="quote-author" id="quoteAuthor">‚Äî Walt Disney</div>
        </div>

        <!-- Main Content Grid -->
        <div class="main-content">
            <!-- Left Panel -->
            <div class="left-panel">
                <!-- AI Chat Assistant -->
                <div class="card">
                    <div class="card-title">üß† Ultra AI Assistant</div>
                    <div class="card-subtitle">Your personal productivity coach</div>
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages"></div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything...">
                            <button class="send-btn" onclick="sendMessage()">Send</button>
                        </div>
                        <div class="quick-actions">
                            <button class="quick-action" onclick="quickAction('motivation')">üí™ Motivate</button>
                            <button class="quick-action" onclick="quickAction('tips')">üí° Tips</button>
                            <button class="quick-action" onclick="quickAction('quote')">‚ú® Quote</button>
                            <button class="quick-action" onclick="quickAction('focus')">üéØ Focus</button>
                        </div>
                    </div>
                </div>

                <!-- ChatGPT Integration -->
                <div class="card">
                    <div class="card-title">ü§ñ Ask Anything - ChatGPT</div>
                    <div class="card-subtitle">Get instant answers to any question</div>
                    <div class="chatgpt-container">
                        <textarea class="chatgpt-input" id="chatgptInput" placeholder="Ask any question - academic, creative, technical..."></textarea>
                        <div style="display: flex; gap: 12px;">
                            <button class="btn btn-primary" onclick="askChatGPT()">Ask AI</button>
                            <button class="btn btn-secondary" onclick="clearChatGPT()">Clear</button>
                            <button class="btn btn-secondary" onclick="speakResponse()">üîä Speak</button>
                        </div>
                        <div class="chatgpt-response" id="chatgptResponse">
                            <div style="font-weight: 600; margin-bottom: 12px; color: var(--primary-color);">AI Response:</div>
                            <div id="chatgptAnswer"></div>
                        </div>
                    </div>
                </div>

                <!-- Smart Task Creator -->
                <div class="card">
                    <div class="card-title">üéØ Smart Task Creator</div>
                    <div class="card-subtitle">AI-powered task creation with natural language</div>
                    <div class="task-input-container">
                        <input type="text" class="task-input" id="taskInput" placeholder="Describe your task...">
                        <button class="add-task-btn" onclick="addTask()">Add Task</button>
                    </div>
                </div>

                <!-- Learning Hub -->
                <div class="card">
                    <div class="card-title">üìö Learning Hub</div>
                    <div class="card-subtitle">Advanced learning tools and resources</div>
                    <div class="learning-grid">
                        <button class="learning-btn" onclick="openFeature('flashcards')">üÉè Flashcards</button>
                        <button class="learning-btn" onclick="openFeature('timer')">‚è±Ô∏è Study Timer</button>
                        <button class="learning-btn" onclick="openFeature('notes')">üìù Smart Notes</button>
                        <button class="learning-btn" onclick="openFeature('quiz')">‚ùì Quiz Mode</button>
                    </div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="right-panel">
                <!-- Today's Tasks -->
                <div class="card">
                    <div class="card-title">üìã Today's Tasks</div>
                    <div class="card-subtitle" id="tasksSummary">No tasks yet</div>
                    <div class="task-list" id="tasksList">
                        <div style="text-align: center; padding: 20px; color: var(--text-secondary);">
                            <div style="font-size: 48px; margin-bottom: 16px;">üéØ</div>
                            <div>Create your first task to get started!</div>
                        </div>
                    </div>
                </div>

                <!-- Progress Display -->
                <div class="card">
                    <div class="card-title">üèÜ Daily Progress</div>
                    <div class="progress-container">
                        <div class="progress-ring">
                            <svg>
                                <circle class="background" cx="60" cy="60" r="45"></circle>
                                <circle class="progress" cx="60" cy="60" r="45" id="progressCircle"></circle>
                            </svg>
                            <div class="progress-text" id="progressText">0%</div>
                        </div>
                        <div class="progress-label">Tasks Completed</div>
                        <button class="btn btn-primary" onclick="getMotivation()">üöÄ Get Motivated</button>
                    </div>
                </div>

                <!-- Study Statistics -->
                <div class="card">
                    <div class="card-title">üìä Study Statistics</div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalTasks">0</div>
                            <div class="stat-label">Total Tasks</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completedTasks">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="studyTime">0h</div>
                            <div class="stat-label">Study Time</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="streakDays">0</div>
                            <div class="stat-label">Streak Days</div>
                        </div>
                    </div>
                </div>

                <!-- Additional Features -->
                <div class="card">
                    <div class="card-title">‚ö° Quick Actions</div>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <button class="btn btn-secondary" onclick="exportData()">üì§ Export Data</button>
                        <button class="btn btn-secondary" onclick="importData()">üì• Import Data</button>
                        <button class="btn btn-secondary" onclick="showHelp()">‚ùì Help & Support</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        let currentUser = null;
        let isLoginMode = false;
        let tasks = [];
        let completedTasks = [];
        let isListening = false;
        let recognition = null;
        let speechSynthesis = window.speechSynthesis;
        let motivationCount = 0;

        // User Database
        const users = JSON.parse(localStorage.getItem('flowstate-users') || '{}');

        // Quotes Database
        const quotes = {
            motivation: [
                { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
                { text: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
                { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
                { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
                { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" }
            ],
            productivity: [
                { text: "Focus on being productive instead of busy.", author: "Tim Ferriss" },
                { text: "The key is not to prioritize what's on your schedule, but to schedule your priorities.", author: "Stephen Covey" },
                { text: "You don't have to be great to get started, but you have to get started to be great.", author: "Les Brown" }
            ],
            study: [
                { text: "Education is the most powerful weapon which you can use to change the world.", author: "Nelson Mandela" },
                { text: "The more that you read, the more things you will know.", author: "Dr. Seuss" },
                { text: "Learning never exhausts the mind.", author: "Leonardo da Vinci" }
            ]
        };

        // Motivational Messages
        const motivationalMessages = [
            "üî• {name}, you're absolutely crushing it today! Keep up the amazing work!",
            "üí™ Hey {name}, remember that every small step builds something incredible!",
            "üåü {name}, your dedication to growth is truly inspiring!",
            "‚ö° You've got this, {name}! Your consistency is what makes champions!",
            "üéØ {name}, you're not just completing tasks - you're designing your future!",
            "üöÄ Amazing progress, {name}! Your commitment is paying off beautifully!",
            "üíé {name}, every challenge you overcome makes you stronger!",
            "üèÜ Outstanding effort, {name}! Stay focused on your extraordinary goals!"
        ];

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ FlowState Pro Loading...');
            
            // Check if user is already logged in
            const savedUser = localStorage.getItem('flowstate-current-user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
                updateUserDisplay();
                loadUserData();
            } else {
                showAuthModal();
            }
            
            // Initialize voice recognition
            initializeVoiceRecognition();
            
            // Set up form handler
            document.getElementById('authForm').addEventListener('submit', handleAuth);
            
            // Set up enter key for chat
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Set up enter key for tasks
            document.getElementById('taskInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addTask();
            });
            
            // Load theme
            const savedTheme = localStorage.getItem('flowstate-theme') || 'light';
            setTheme(savedTheme);
            
            // Show welcome message
            setTimeout(() => {
                addChatMessage("üëã Welcome to FlowState Pro! I'm your AI productivity assistant. How can I help you achieve your goals today?", 'ai');
                showMotivationalQuote();
            }, 1000);
            
            console.log('‚úÖ FlowState Pro Ready!');
        });

        // Authentication Functions
        function handleAuth(event) {
            event.preventDefault();
            
            const name = document.getElementById('nameInput').value.trim();
            const password = document.getElementById('passwordInput').value.trim();
            
            if (!name || !password) {
                showError('Please fill in all fields');
                return;
            }
            
            const userKey = name.toLowerCase();
            
            if (isLoginMode) {
                // Login
                if (users[userKey] && users[userKey].password === password) {
                    currentUser = users[userKey];
                    localStorage.setItem('flowstate-current-user', JSON.stringify(currentUser));
                    showSuccess(`Welcome back, ${currentUser.name}!`);
                    setTimeout(() => {
                        showMainApp();
                        updateUserDisplay();
                        loadUserData();
                    }, 1000);
                } else {
                    showError('Invalid name or password');
                }
            } else {
                // Create Account
                if (users[userKey]) {
                    showError('Account already exists with this name');
                    return;
                }
                
                const newUser = {
                    name: name,
                    password: password,
                    createdAt: new Date().toISOString(),
                    tasks: [],
                    completedTasks: [],
                    stats: {
                        totalTasks: 0,
                        completedTasks: 0,
                        studyTime: 0,
                        streakDays: 0
                    }
                };
                
                users[userKey] = newUser;
                localStorage.setItem('flowstate-users', JSON.stringify(users));
                
                currentUser = newUser;
                localStorage.setItem('flowstate-current-user', JSON.stringify(currentUser));
                
                showSuccess(`Account created successfully! Welcome, ${currentUser.name}!`);
                setTimeout(() => {
                    showMainApp();
                    updateUserDisplay();
                    speak(`Welcome to FlowState Pro, ${currentUser.name}! Let's boost your productivity!`);
                }, 1000);
            }
        }

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            
            const title = document.getElementById('authTitle');
            const subtitle = document.getElementById('authSubtitle');
            const submitBtn = document.getElementById('authSubmitBtn');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            const passwordInput = document.getElementById('passwordInput');
            
            if (isLoginMode) {
                title.textContent = 'Welcome Back';
                subtitle.textContent = 'Sign in to your account';
                submitBtn.textContent = 'Sign In';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Create Account';
                passwordInput.placeholder = 'Your Password';
            } else {
                title.textContent = 'Welcome to FlowState Pro';
                subtitle.textContent = 'Create your productivity account';
                submitBtn.textContent = 'Create Account';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
                passwordInput.placeholder = 'Create Password';
            }
            
            hideMessages();
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => errorDiv.style.display = 'none', 3000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        }

        function hideMessages() {
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
        }

        function showAuthModal() {
            document.getElementById('authModal').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('authModal').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        function updateUserDisplay() {
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            }
        }

        function logout() {
            if (currentUser) {
                saveUserData();
                speak(`Goodbye, ${currentUser.name}! See you next time!`);
            }
            
            currentUser = null;
            tasks = [];
            completedTasks = [];
            
            localStorage.removeItem('flowstate-current-user');
            
            // Reset form
            document.getElementById('authForm').reset();
            if (isLoginMode) toggleAuthMode();
            
            showAuthModal();
            showToast('üëã Logged out successfully');
        }

        // Voice Recognition
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    isListening = true;
                    document.getElementById('voiceBtn').classList.add('listening');
                    document.getElementById('voiceStatus').textContent = 'Listening...';
                };

                recognition.onend = () => {
                    isListening = false;
                    document.getElementById('voiceBtn').classList.remove('listening');
                    document.getElementById('voiceStatus').textContent = 'Click to start voice recognition';
                };

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    processVoiceCommand(transcript);
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    showToast('‚ùå Voice recognition error. Please try again.');
                };
            }
        }

        function toggleVoiceRecognition() {
            if (!recognition) {
                showToast('‚ùå Voice recognition not supported');
                return;
            }

            if (isListening) {
                recognition.stop();
            } else {
                recognition.start();
            }
        }

        function processVoiceCommand(transcript) {
            console.log('Voice command:', transcript);
            
            const userName = currentUser ? currentUser.name : 'friend';
            
            if (transcript.toLowerCase().includes('create') || transcript.toLowerCase().includes('add task')) {
                document.getElementById('taskInput').value = transcript.replace(/create|add task/gi, '').trim();
                addTask();
                speak(`Task created, ${userName}!`);
            } else if (transcript.toLowerCase().includes('motivate')) {
                getMotivation();
            } else {
                document.getElementById('chatInput').value = transcript;
                sendMessage();
            }
        }

        function speak(text) {
            if (speechSynthesis) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                speechSynthesis.speak(utterance);
            }
        }

        // Task Management
        function addTask() {
            const input = document.getElementById('taskInput');
            const text = input.value.trim();
            
            if (!text) {
                showToast('‚ùå Please enter a task');
                return;
            }
            
            const task = {
                id: Date.now(),
                text: text,
                completed: false,
                createdAt: new Date(),
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            };
            
            tasks.push(task);
            input.value = '';
            renderTasks();
            updateStats();
            saveUserData();
            
            const userName = currentUser ? currentUser.name : 'friend';
            speak(`Task added successfully, ${userName}!`);
            showToast('‚úÖ Task added!');
        }

        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                
                if (task.completed) {
                    completedTasks.push({...task, completedAt: new Date()});
                    const userName = currentUser ? currentUser.name : 'friend';
                    speak(`Great job, ${userName}! Task completed!`);
                    showToast('üéâ Task completed!');
                }
                
                renderTasks();
                updateStats();
                updateProgress();
                saveUserData();
            }
        }

        function deleteTask(id) {
            tasks = tasks.filter(t => t.id !== id);
            renderTasks();
            updateStats();
            updateProgress();
            saveUserData();
            showToast('üóëÔ∏è Task deleted');
        }

        function renderTasks() {
            const container = document.getElementById('tasksList');
            const summary = document.getElementById('tasksSummary');
            
            if (tasks.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">üéØ</div>
                        <div>Create your first task to get started!</div>
                    </div>
                `;
                summary.textContent = 'No tasks yet';
                return;
            }
            
            const completedToday = tasks.filter(t => t.completed).length;
            summary.textContent = `${completedToday}/${tasks.length} completed`;
            
            container.innerHTML = '';
            
            tasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task-item';
                
                taskElement.innerHTML = `
                    <div class="task-checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask(${task.id})"></div>
                    <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
                    <div class="task-time">${task.time}</div>
                    <button class="delete-task-btn" onclick="deleteTask(${task.id})">√ó</button>
                `;
                
                container.appendChild(taskElement);
            });
        }

        function updateProgress() {
            const total = tasks.length;
            const completed = tasks.filter(t => t.completed).length;
            const percentage = total > 0 ? (completed / total) * 100 : 0;
            
            const circle = document.getElementById('progressCircle');
            const circumference = 2 * Math.PI * 45;
            const offset = circumference - (percentage / 100) * circumference;
            
            circle.style.strokeDashoffset = offset;
            document.getElementById('progressText').textContent = `${Math.round(percentage)}%`;
        }

        function updateStats() {
            if (!currentUser) return;
            
            const totalTasks = tasks.length + completedTasks.length;
            const completed = tasks.filter(t => t.completed).length + completedTasks.length;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('studyTime').textContent = '0h';
            document.getElementById('streakDays').textContent = Math.min(completed, 30);
            
            // Update user stats
            currentUser.stats = {
                totalTasks: totalTasks,
                completedTasks: completed,
                studyTime: 0,
                streakDays: Math.min(completed, 30)
            };
        }

        // AI Chat
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = generateAIResponse(message);
                addChatMessage(response, 'ai');
                speak(response.replace(/üéØ|üí™|‚ú®|üöÄ|üìö/g, ''));
            }, 1000);
        }

        function addChatMessage(message, sender) {
            const container = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.className = `message ${sender}`;
            div.textContent = message;
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function generateAIResponse(message) {
            const userName = currentUser ? currentUser.name : 'friend';
            
            if (message.toLowerCase().includes('motivat')) {
                const motivations = motivationalMessages.map(m => m.replace('{name}', userName));
                return motivations[Math.floor(Math.random() * motivations.length)];
            }
            
            if (message.toLowerCase().includes('task') || message.toLowerCase().includes('todo')) {
                return `üéØ Great thinking, ${userName}! Break down your goal into smaller, actionable tasks. What specific step can you take right now?`;
            }
            
            if (message.toLowerCase().includes('study') || message.toLowerCase().includes('learn')) {
                return `üìö Excellent focus on learning, ${userName}! Try the Pomodoro Technique: 25 minutes of focused study, then a 5-minute break.`;
            }
            
            if (message.toLowerCase().includes('focus') || message.toLowerCase().includes('concentrate')) {
                return `üßò ${userName}, try this: eliminate distractions, set a clear intention, and work in focused time blocks. You've got this!`;
            }
            
            // Default responses
            const responses = [
                `Hi ${userName}! I'm here to help boost your productivity. What would you like to accomplish today?`,
                `Great question, ${userName}! Remember, every small step forward is progress. How can I support your goals?`,
                `${userName}, you're on the right track! Consistency beats perfection every time. What's your next priority?`,
                `I'm here to help you succeed, ${userName}! What challenge can we tackle together today?`
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function quickAction(type) {
            const userName = currentUser ? currentUser.name : 'friend';
            
            switch(type) {
                case 'motivation':
                    getMotivation();
                    break;
                case 'tips':
                    addChatMessage(`üí° Pro Tip: Use the 2-minute rule, ${userName}! If something takes less than 2 minutes, do it immediately instead of putting it off.`, 'ai');
                    break;
                case 'quote':
                    showMotivationalQuote();
                    break;
                case 'focus':
                    addChatMessage(`üéØ Focus Strategy: Try timeboxing, ${userName}! Allocate specific time slots for each task and stick to them. This prevents work from expanding unnecessarily.`, 'ai');
                    break;
            }
        }

        function getMotivation() {
            const userName = currentUser ? currentUser.name : 'friend';
            const message = motivationalMessages[motivationCount % motivationalMessages.length].replace('{name}', userName);
            motivationCount++;
            
            addChatMessage(message, 'ai');
            speak(message);
            showMotivationalQuote();
        }

        // Quote Management
        function showMotivationalQuote() {
            const categories = Object.keys(quotes);
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const categoryQuotes = quotes[randomCategory];
            const quote = categoryQuotes[Math.floor(Math.random() * categoryQuotes.length)];
            
            document.getElementById('quoteText').textContent = `"${quote.text}"`;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quote.author}`;
            document.getElementById('quoteCategory').textContent = randomCategory.charAt(0).toUpperCase() + randomCategory.slice(1);
        }

        // ChatGPT Simulation
        function askChatGPT() {
            const input = document.getElementById('chatgptInput');
            const question = input.value.trim();
            
            if (!question) {
                showToast('‚ùå Please enter a question');
                return;
            }
            
            const response = generateChatGPTResponse(question);
            document.getElementById('chatgptAnswer').textContent = response;
            document.getElementById('chatgptResponse').classList.add('show');
        }

        function generateChatGPTResponse(question) {
            const responses = [
                "This is a great question! Based on current research and best practices, here's what I recommend: Focus on breaking complex problems into smaller, manageable parts. This approach helps reduce cognitive load and makes progress more visible.",
                
                "Excellent inquiry! The key principle here involves understanding the fundamental concepts first, then building upon them systematically. Think of it like constructing a building - you need a solid foundation before adding floors.",
                
                "Thank you for this thoughtful question! The most effective approach typically combines theoretical understanding with practical application. I suggest starting with the core concepts and then practicing through real-world examples.",
                
                "Great question! Research shows that the best results come from consistent, deliberate practice combined with regular reflection on your progress. Consider setting specific, measurable goals and tracking your improvement over time."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function clearChatGPT() {
            document.getElementById('chatgptInput').value = '';
            document.getElementById('chatgptResponse').classList.remove('show');
        }

        function speakResponse() {
            const response = document.getElementById('chatgptAnswer').textContent;
            if (response) {
                speak(response);
            } else {
                showToast('‚ùå No response to speak');
            }
        }

        // Theme Management
        function setTheme(themeName) {
            document.body.setAttribute('data-theme', themeName);
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.toLowerCase() === themeName);
            });
            
            localStorage.setItem('flowstate-theme', themeName);
            showToast(`üé® Theme changed to ${themeName}`);
        }

        // Feature Functions
        function openFeature(feature) {
            const features = {
                flashcards: 'üÉè Flashcards feature coming soon! Create and study with AI-generated flashcards.',
                timer: '‚è±Ô∏è Study Timer activated! Use focus sessions to maximize your learning efficiency.',
                notes: 'üìù Smart Notes feature will help you organize and connect your ideas intelligently.',
                quiz: '‚ùì Quiz Mode will test your knowledge and help reinforce learning.'
            };
            
            showToast(features[feature] || '‚ú® Feature coming soon!');
        }

        // Data Management
        function saveUserData() {
            if (!currentUser) return;
            
            currentUser.tasks = tasks;
            currentUser.completedTasks = completedTasks;
            
            const userKey = currentUser.name.toLowerCase();
            users[userKey] = currentUser;
            
            localStorage.setItem('flowstate-users', JSON.stringify(users));
            localStorage.setItem('flowstate-current-user', JSON.stringify(currentUser));
        }

        function loadUserData() {
            if (!currentUser) return;
            
            tasks = currentUser.tasks || [];
            completedTasks = currentUser.completedTasks || [];
            
            renderTasks();
            updateStats();
            updateProgress();
        }

        function exportData() {
            if (!currentUser) {
                showToast('‚ùå Please log in to export data');
                return;
            }
            
            const data = {
                user: currentUser,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `flowstate-${currentUser.name}-data.json`;
            link.click();
            
            showToast('üì§ Data exported successfully!');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.user && data.user.tasks) {
                                tasks = data.user.tasks;
                                completedTasks = data.user.completedTasks || [];
                                renderTasks();
                                updateStats();
                                updateProgress();
                                saveUserData();
                                showToast('üì• Data imported successfully!');
                            } else {
                                showToast('‚ùå Invalid file format');
                            }
                        } catch (error) {
                            showToast('‚ùå Error reading file');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function showHelp() {
            const helpText = `üÜò FlowState Pro Help:

üé§ Voice Commands: Click microphone and say "create task" or "motivate me"
üß† AI Assistant: Ask questions and get personalized productivity advice  
üéØ Tasks: Add tasks with natural language, check them off when complete
üìä Progress: Track your daily completion rate and productivity statistics
üé® Themes: Switch between Light, Dark, and Elegant themes
üíæ Data: Export/import your data to backup your progress

Need more help? Just ask the AI assistant!`;
            
            addChatMessage(helpText, 'ai');
        }

        // Utility Functions
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--card-bg);
                color: var(--text-primary);
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: var(--shadow-primary);
                z-index: 1000;
                border: 1px solid var(--border-color);
                animation: fadeIn 0.3s ease;
                max-width: 300px;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 300);
            }, 3000);
        }

        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        console.log('üéØ FlowState Pro loaded successfully!');
    </script>
</body>
</html>
